CMAKE_MINIMUM_REQUIRED(VERSION 2.8.11)

PROJECT(log_server)

SET(APP_VER V17.10)
SET(OS_TYPE X86_64)

#设置编译类型
IF("${CMAKE_BUILD_TYPE}" STREQUAL "Release")
	SET(VER_TYPE R)
ELSE()
	SET(VER_TYPE D)
ENDIF()

#路径变量
SET(ROOT_DIR 	${CMAKE_CURRENT_SOURCE_DIR}/..)
SET(3RDPARTY 	${ROOT_DIR}/3rdparty)
SET(DIV_DIR 	${ROOT_DIR}/logserver)
SET(SCRIPTS_DIR	${ROOT_DIR}/project/scripts)

ADD_DEFINITIONS(-pipe -g -Wall)

#CCACHE
OPTION(CCACHE "Compile with ccache" ON)
IF(CCACHE)
	FIND_PROGRAM(CCACHE_TOOL ccache HINTS ${SCRIPTS_DIR}/tools)
	IF(CCACHE_TOOL)
		SET_PROPERTY(GLOBAL PROPERTY RULE_LAUNCH_COMPILE ${CCACHE_TOOL})
		SET_PROPERTY(GLOBAL PROPERTY RULE_LAUNCH_LINK ${CCACHE_TOOL})
	ENDIF(CCACHE_TOOL)
ENDIF(CCACHE)

#LINT
OPTION(LINT "lint check only" OFF)
IF(LINT)
	INCLUDE(${SCRIPTS_DIR}/check/lint/lint.cmake)
ENDIF(LINT)

#子目录
ADD_SUBDIRECTORY(${DIV_DIR}/code code)