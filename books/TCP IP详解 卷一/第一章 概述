1.2 分层
1、一个协议族(比如TCP/IP)是一组不同层次上多个协议的组合。
尽管通常称该协议族为TCP/IP，但TCP和IP只是其中的两个协议而已。该协议族的另一个名字是Internet协议族(Internet Protocol Suite)。

2、TCP/IP协议族通常被认为是一个四层协议系统。
<1>链路层(数据链路层、网络接口层)：通常包括操作系统中的设备驱动程序和计算机中对应的网络接口卡。它们一起处理与传输媒介的物理接口细节。
<2>网络层(互联网层)：处理分组在网络中的活动，例如分组的选路。
<3>运输层(传输层)：为两台主机上的应用程序提供端到端的通信。
<4>应用层：负责处理特定的应用程序细节。

3、一个互联网就是一组通过相同协议族互连在一起的网络。
<1>多个网络通过路由器进行连接。这里称为路由器而不是网关。
现在网管这个术语只用来表示应用层网关(一个连接两个不同协议族的进程，它为某个特定应用程序服务)。
<2>路由器为不同类型的物理网络提供连接：以太网、令牌环网、点对点的链接、FDDI等。
<3>应用层和传输层使用端到端(End-to-End)协议；网络层提供的是逐跳(Hop-by-Hop)协议。
端系统(End system):两边的两台主机，使用端到端和逐跳协议。
中间系统：中间的路由器，使用逐跳协议。

4、在TCP/IP协议族中，网络层IP提供的是一种不可靠的服务。也就是说，它只是尽可能快地把分组从结点送到目的结点，但并不提供任何可靠性保证。
TCP在不可靠的IP层上提供了一个可靠的运输层。由此可见，运输层和网络层分别负责不同的功能。

1.6 封装
1、当应用程序用TCP传送数据时，数据被送入协议栈中，然后逐个通过每一层直到被当做一串比特流送入网络。
其中每一层对收到的数据都要加一些首部或尾部信息。
<1>TCP传递给IP的数据单元称为TCP报文段(TCP段、TCP分节；TCP segment);
<2>IP传递给网络接口层的数据单元称为IP数据报(IP datagram)，更准确地是称为分组(packet)，分组既可以是一个IP数据报，也可以是数据报的一个片(fragment);
<3>通过以太网传输的比特流称作帧(Frame)。
<4>以太网数据帧的物理特性是其长度必须在46~1500字节之间。(不包括以太网帧首部和以太网帧尾部)

2、UDP数据与TCP数据基本一致。唯一不同的是UDP传给IP的信息单元称作UDP数据报(UDP datagram)，而且UDP首部长8个字节。

3、由于TCP、UDP、ICMP、IGMP都要向IP传送数据，因此IP必须在生成的IP首部中加入某种标识，以表明数据属于那一层。
1-ICMP、2-IGMP、6-TCP、17-UDP

4、运输层协议在生成报文首部时要存入一个应用程序的标识符。TCP和UDP都用一个16位的端口号来标识不同的应用程序。
TCP和UDP把源端口号和目的端口号分别存入报文首部中。

5、网络接口分别要发送和接收IP、ARP和RARP数据，因此也必须在以太网的帧首部中加入某种形式的标识，以指明生成数据的网络层协议。
为此，以太网帧首部也有一个16位的帧类型域。

1.7 分用
1、当目的主机收到一个以太网数据帧时，数据就开始从协议栈中由底向上升，同时去掉各层协议加上的报文首部。
每层协议都要去检查报文首部中的协议标识，以确定接收数据的上层协议。这个过程称为分用(Demultiplexing)。

1.8 客户-服务模型
一般来说TCP服务器是并发的，UDP服务器是重复的。

1.13 互联网
internet这个词第一个字母是否大写决定了它有不同的含义。
<1>internet意思是用一个共同的协议族把多个网络连在一起。
<2>Internet是指世界范围内通过TCP/IP互相通信的所有主机集合。Internet是一个internet。

1.15 应用编程接口
使用TCP/IP协议的应用程序通常采用两种应用编程接口：socket和TLI(运输层接口)。
<1>前者有时称为伯克利socket，表明是从伯克利版发展而来的；
<2>后者起初由AT&T开发的，有时称为XTI(X/Open运输层接口)。XTI实际上是TLI的一个超集。


















